# QuantAgent V2 - é‡æ„ç‰ˆ (Refactored)

QuantAgent æ˜¯ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“ï¼ˆMulti-Agentï¼‰çš„é‡åŒ–äº¤æ˜“åˆ†æç³»ç»Ÿï¼Œç»“åˆäº†æŠ€æœ¯æŒ‡æ ‡ã€å½¢æ€è¯†åˆ«å’Œè¶‹åŠ¿åˆ†æï¼Œä¸ºç”¨æˆ·æä¾›å…¨é¢çš„å¸‚åœºæ´å¯Ÿã€‚

æœ¬é¡¹ç›®æ˜¯ V2 é‡æ„ç‰ˆæœ¬ï¼Œé‡‡ç”¨äº†å‰åç«¯åˆ†ç¦»çš„ç°ä»£åŒ–æ¶æ„ã€‚

## ğŸ— æ¶æ„æ¦‚è§ˆ (Architecture)

- **åç«¯ (Backend)**: Python + FastAPI
  - å¼‚æ­¥å¤„ç†ï¼Œé«˜æ€§èƒ½ API
  - æ¨¡å—åŒ–æœåŠ¡æ¶æ„ (Service Layer)
  - Pydantic ç±»å‹å®‰å…¨
  - WebSocket å®æ—¶è¿›åº¦æ¨é€
- **å‰ç«¯ (Frontend)**: React + TypeScript + Vite
  - ç»„ä»¶åŒ– UI å¼€å‘
  - Zustand å…¨å±€çŠ¶æ€ç®¡ç†
  - Tailwind CSS ç°ä»£åŒ–æ ·å¼
  - å®Œæ•´å¤åˆ»åŸç‰ˆç»å…¸å¸ƒå±€

## ğŸ“‚ ç›®å½•ç»“æ„ (Directory Structure)

```
refactor_v2/
â”œâ”€â”€ backend/                # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®ä¸äº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘ (äº¤æ˜“å¼•æ“ã€è¡Œæƒ…æœåŠ¡)
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ agents/         # AI æ™ºèƒ½ä½“ (LangGraph)
â”‚   â”‚   â””â”€â”€ utils/          # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ requirements.txt    # åç«¯ä¾èµ–
â”‚   â””â”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚
â””â”€â”€ frontend/               # å‰ç«¯ä»£ç 
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/            # API è¯·æ±‚å°è£…
    â”‚   â”œâ”€â”€ components/     # UI ç»„ä»¶
    â”‚   â”œâ”€â”€ store/          # Zustand çŠ¶æ€ç®¡ç†
    â”‚   â””â”€â”€ types/          # TypeScript ç±»å‹å®šä¹‰
    â”œâ”€â”€ public/             # é™æ€èµ„æº
    â””â”€â”€ package.json        # å‰ç«¯ä¾èµ–
```

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. åç«¯å¯åŠ¨ (Backend)

ç¡®ä¿æ‚¨å·²å®‰è£… Python 3.10+ã€‚

```bash
# 1. è¿›å…¥åç«¯ç›®å½•
cd backend

# 2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ (å¯é€‰ä½†æ¨è)
python -m venv venv
# Windows:
.\venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ä¸º .envï¼Œå¹¶å¡«å…¥æ‚¨çš„ API Key
cp .env.example .env

# 5. å¯åŠ¨æœåŠ¡
uvicorn app.main:app --reload   ï¼ˆçƒ­é‡è½½ï¼‰
python run.py
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8000` å¯åŠ¨ã€‚
API æ–‡æ¡£åœ°å€: `http://localhost:8000/docs`

### 2. å‰ç«¯å¯åŠ¨ (Frontend)

ç¡®ä¿æ‚¨å·²å®‰è£… Node.js 18+ã€‚

```bash
# 1. è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# 2. å®‰è£…ä¾èµ–
npm install

# 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯é¡µé¢å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½ (Features)

- **å¤šæ¨¡æ€åˆ†æ**: æ”¯æŒ OpenAIã€DeepSeekã€Qwen ç­‰å¤šç§å¤§æ¨¡å‹è¿›è¡Œå¸‚åœºåˆ†æã€‚
- **åŒæ¨¡å‹ç³»ç»Ÿ**: æ”¯æŒé…ç½®ç‹¬ç«‹çš„åˆ†ææ¨¡å‹å’Œå†³ç­–æ¨¡å‹ã€‚
- **çµæ´»çš„æ•°æ®æº**:
  - å®æ—¶æœ€æ–°æ•°æ®
  - å†å²æ—¥æœŸèŒƒå›´å›æµ‹
  - æŒ‡å®šæ—¶é—´ç‚¹å¤ç›˜
- **èµ„äº§ç®¡ç†**: æ”¯æŒè‡ªå®šä¹‰æ·»åŠ äº¤æ˜“å¯¹ï¼Œå…·å¤‡ç®¡ç†æ¨¡å¼ã€‚
- **å®æ—¶è¿›åº¦**: é€šè¿‡ WebSocket å®æ—¶å±•ç¤ºåˆ†ææ­¥éª¤å’ŒçŠ¶æ€ã€‚

## ğŸ“ å¼€å‘æŒ‡å—

- **åç«¯å¼€å‘**: ä¸»è¦é€»è¾‘ä½äº `app/services/trading_engine.py` (äº¤æ˜“æ ¸å¿ƒ) å’Œ `app/api/v1/endpoints/analyze.py` (æ¥å£å±‚)ã€‚
- **å‰ç«¯å¼€å‘**: ä¸»è¦é¡µé¢ç»„ä»¶ä½äº `src/components/AnalysisForm.tsx`ï¼ŒçŠ¶æ€ç®¡ç†ä½äº `src/store/useAppStore.ts`ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

- æœ¬é¡¹ç›®ä¾èµ–å¤–éƒ¨è¡Œæƒ… API (å¦‚ caomao.xyz) å’Œ LLM APIï¼Œè¯·ç¡®ä¿ `.env` ä¸­çš„ Token å’Œ Key é…ç½®æ­£ç¡®ã€‚
- é¦–æ¬¡è¿è¡Œæ—¶ï¼Œå‰ç«¯éœ€è¦ä¸‹è½½ä¾èµ–ï¼Œè¯·ä¿æŒç½‘ç»œé€šç•…ã€‚
